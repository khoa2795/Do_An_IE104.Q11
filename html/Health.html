<!DOCTYPE html>
<html lang="vi">

<head>
    <!-- Phần head: preload, favicon, stylesheet và script preload -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VHealth - Thông tin sức khỏe</title>
    <script src="/assets/javascript/theme-preload.js"></script>
    <link rel="icon" type="image/png" href="/assets/images/icons/logoheath.png">
    <link rel="preload" href="../assets/css/style.css" as="style" fetchpriority="high">
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="preload" href="../assets/css/header.css" as="style">
    <link rel="stylesheet" href="../assets/css/header.css">
    <link rel="preload" href="../assets/css/leftnav.css" as="style">
    <link rel="stylesheet" href="../assets/css/leftnav.css">
    <link rel="stylesheet" href="../assets/css/footer.css">
    <link rel="preload" href="../assets/css/health-info.css" as="style">
    <link rel="stylesheet" href="../assets/css/health-info.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <script>
        // Khi load xong, bỏ thuộc tính 'data-critical' để hiển thị nội dung
        // (Sử dụng để hiện trạng thái skeleton/loading trước khi dữ liệu sẵn sàng)
        window.addEventListener('load', function () {
            if (document.body) {
                document.body.removeAttribute('data-critical');
            }
        });
    </script>

    <style>
        .main-content {
            display: none;
        }

        .main-content.auth-verified {
            display: block;
        }

        .loading-placeholder {
            color: #999;
            font-style: italic;
        }
    </style>

</head>

<body class="page-health" data-critical="pending">
        <!--
            Body của trang Health
            - Nếu người dùng đã xác thực, phần tử .main-content sẽ có class .auth-verified
            - data-critical dùng để hiển thị trạng thái skeleton trong khi chờ dữ liệu
        -->
    <script>
        (function () {
            const currentUser = sessionStorage.getItem('currentUser');
            if (currentUser) {
                document.addEventListener('DOMContentLoaded', function () {
                    const mainContent = document.querySelector('.main-content');
                    if (mainContent) {
                        mainContent.classList.add('auth-verified');
                    }
                });
            }
        })();
    </script>

    <!-- Header sẽ được load động vào thẻ này (header.js) -->
    <div id="header-placeholder"></div>

    <div class="container">
        <div id="sidebar-placeholder"></div>

        <!-- Nội dung chính: chỉ hiển thị khi user đã xác thực -->
        <main class="main-content">

            <!-- Header thông tin sức khỏe: avatar, tiêu đề và tab điều hướng -->
            <section class="health-header">
                <div class="row">
                    <div class="left-box">
                        <div class="header-left">
                            <img src="/assets/images/Health/avatar.png" alt="Avatar" class="avatar">
                            <div class="title">
                                <h2 class="loading-placeholder">Đang tải...</h2>
                            </div>
                        </div>
                    </div>

                    <div class="right-box">
                        <div class="header-right">
                            <p class="loading-placeholder">Đang tải thông tin...</p>
                        </div>
                    </div>
                </div>
                <div class="tab-menu">
                    <button class="tab active" data-tab="info">Thông tin sức khỏe cá nhân</button>
                    <button class="tab" data-tab="disease">Thông tin tiền sử bệnh tật</button>
                </div>
            </section>

            <div class="tab-content">

                <div class="tab-pane active" id="info">

                    <!-- Lưới chính chứa 3 cột: thông số (cột 1), thông số (cột 2), và Lưu ý (cột 3) -->
                    <div class="health-grid-container">
                        <div class="health-col">
                            <div class="stat-card-display">
                                <div class="card-header">
                                    <span class="card-title">Chiều cao</span>
                                    <img src="/assets/images/Health/ruler.png" alt="Icon" class="card-icon">
                                </div>
                                <div class="card-content">
                                    <span class="card-value" id="display-height">--</span>
                                    <span class="unit">cm</span>
                                </div>
                            </div>
                            <div class="stat-card-display">
                                <div class="card-header">
                                    <span class="card-title">Huyết áp</span>
                                    <img src="/assets/images/Health/heart-rate.png" alt="Icon" class="card-icon">
                                </div>
                                <div class="card-content">
                                    <span class="card-value-small" id="display-bp">--/--</span>
                                    <span class="unit">mmHg</span>
                                </div>
                            </div>
                            <div class="stat-card-display">
                                <div class="card-header">
                                    <span class="card-title">Đường huyết (GI)</span>
                                    <img src="/assets/images/Health/red-blood-cells.png" alt="Icon" class="card-icon">
                                </div>
                                <div class="card-content">
                                    <span class="card-value" id="display-glucose">--</span>
                                    <span class="unit">mg/dl</span>
                                </div>
                            </div>
                        </div>
                        <div class="health-col">
                            <div class="stat-card-display">
                                <div class="card-header">
                                    <span class="card-title">Cân nặng</span>
                                    <img src="/assets/images/Health/weigh.png" alt="Icon" class="card-icon">
                                </div>
                                <div class="card-content">
                                    <span class="card-value" id="display-weight">--</span>
                                    <span class="unit">kg</span>
                                </div>
                            </div>
                            <div class="stat-card-display">
                                <div class="card-header">
                                    <span class="card-title">Nhịp tim</span>
                                    <img src="/assets/images/Health/heartbeat.png" alt="Icon" class="card-icon">
                                </div>
                                <div class="card-content">
                                    <span class="card-value" id="display-heart">--</span>
                                    <span class="unit">bpm</span>
                                </div>
                            </div>

                            <div class="stat-card-display">
                                <div class="card-header">
                                    <span class="card-title">Chỉ số BMI</span>
                                    <img src="/assets/images/Health/BMI.png" alt="Icon" class="card-icon">
                                </div>
                                <div class="card-content">
                                    <span class="card-value" id="display-bmi-card">--</span>
                                    <span class="unit"></span>
                                </div>
                            </div>
                        </div>

                        <div class="health-col notes-column">
                            <h3 class="col-title">Lưu ý</h3>
                            <div class="info-card">
                                <span class="info-card-title">Dị ứng thuốc</span>
                                <span class="info-card-content loading-placeholder">--</span>
                            </div>
                            <div class="info-card">
                                <span class="info-card-title">Thói quen sống</span>
                                <span class="info-card-content loading-placeholder">--</span>
                            </div>
                            <div class="info-card">
                                <span class="info-card-title">Mục tiêu</span>
                                <span class="info-card-content loading-placeholder">--</span>
                            </div>
                            <div class="info-card">
                                <span class="info-card-title">Chế độ dinh dưỡng</span>
                                <span class="info-card-content loading-placeholder">--</span>
                            </div>
                            <div class="info-card">
                                <span class="info-card-title">Tình trạng tâm lý</span>
                                <span class="info-card-content loading-placeholder">--</span>
                            </div>
                            <div class="info-card">
                                <span class="info-card-title">Bệnh di truyền</span>
                                <span class="info-card-content loading-placeholder">--</span>
                            </div>
                            <div class="info-card">
                                <span class="info-card-title">Đang điều trị bệnh lý</span>
                                <span class="info-card-content loading-placeholder">--</span>
                            </div>
                            <div class="info-card info-card-add">
                                <span>+</span>
                            </div>
                        </div>
                    </div>

                    <!-- Nút chuyển sang trang chỉnh sửa thông tin sức khỏe -->
                    <div class="btn-change-container">
                        <a href="Health-edit.html" class="btn-change">Chỉnh sửa</a>
                    </div>

                    <!-- Phần gợi ý bài viết liên quan đến sức khỏe -->
                    <section class="recommend-section">
                        <h3>Gợi ý bài viết</h3>
                        <div class="article-grid">
                            <div class="article-card">
                                <img src="/assets/images/Health/vidu1.webp" alt="Bài viết 1">
                                <p>5 mẹo giữ gìn sức khỏe trong mùa đông</p>
                                <a href="#">Xem thêm</a>
                            </div>
                            <div class="article-card">
                                <img src="/assets/images/Health/vidu2.webp" alt="Bài viết 2">
                                <p>7 thực phẩm dễ kiếm giúp giảm cân và tăng cường sức khỏe mùa đông</p>
                                <a href="#">Xem thêm</a>
                            </div>
                            <div class="article-card">
                                <img src="/assets/images/Health/vidu3.webp" alt="Bài viết 3">
                                <p>8 loại trái cây giúp giảm cân và tăng cường sức khỏe trong mùa đông</p>
                                <a href="#">Xem thêm</a>
                            </div>
                            <div class="article-card">
                                <img src="/assets/images/Health/vidu4.webp" alt="Bài viết 4">
                                <p>Uống nước ép trái cây hằng ngày có gây tăng cân không?</p>
                                <a href="#">Xem thêm</a>
                            </div>
                        </div>
                    </section>

                </div>

                <div class="tab-pane" id="disease">
                    <p>Đây là phần <b>Thông tin tiền sử bệnh tật</b>. Ghi chú các bệnh đã từng mắc hoặc đang điều trị.
                    </p>
                </div>

            </div>
        </main>
    </div>

    <!-- Footer sẽ được load động vào thẻ này (footer.js) -->
    <div id="footer-placeholder"></div>

    <!-- Scripts: xác thực, cache dữ liệu, loader dữ liệu health, và các module UI -->
    <script src="/assets/javascript/auth-check.js"></script>
    <script src="/assets/javascript/data-cache.js"></script>
    <script src="/assets/javascript/health-data-loader.js"></script>
    <script src="/assets/javascript/header.js"></script>
    <script src="/assets/javascript/leftnav.js"></script>
    <script src="/assets/javascript/footer.js"></script>
    <script src="/assets/javascript/Health.js"></script>
    <script src="/assets/javascript/chatbot.js"></script>
</body>

</html>